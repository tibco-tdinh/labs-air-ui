<div class="defect-action">
  <mat-button-toggle-group [(ngModel)]="currentDefect">
    <mat-button-toggle (click)="handleAction(currentDefect)" value="*">
      All
    </mat-button-toggle>
    <mat-button-toggle (click)="handleAction(currentDefect)" value="missing_pick">
      Missing Pick
      <img src="/assets/img/simulator/missing-pick.png">
    </mat-button-toggle>
    <mat-button-toggle (click)="handleAction(currentDefect)" value="selvedge">
      Selvedge
      <img src="/assets/img/simulator/selvedge.png">
    </mat-button-toggle>
    <mat-button-toggle (click)="handleAction(currentDefect)" value="hole">
      Hole
      <img src="/assets/img/simulator/hole.png">
    </mat-button-toggle>
    <mat-button-toggle (click)="handleAction(currentDefect)" value="stain">
      Stain
      <img src="/assets/img/simulator/stain.png">
    </mat-button-toggle>
    <mat-button-toggle (click)="handleAction(currentDefect)"value="color_flecks">
      Color Flecks
      <img src="/assets/img/simulator/color-flecks.png">
    </mat-button-toggle>
    <mat-button-toggle (click)="handleAction(currentDefect)" value="good">
      Good
    </mat-button-toggle>
  </mat-button-toggle-group>
</div>
<div class="iot-textile-simulator">
  <div (click)="playVideo()">
    <video width="400" height="300" src="/assets/video/textile.mp4" controls></video>
  </div>
  <div class="table-container">
    <div>
      <span class="table-title">{{pieChartOptions.title.text}}</span>
      <table mat-table [dataSource]="tableData" matSort matSortActive="count" matSortStart="desc" matSortDirection="desc">
          <ng-container matColumnDef="defect">
              <th mat-header-cell *matHeaderCellDef> Defect </th>
              <td mat-cell *matCellDef="let dataCell"> {{dataCell.defect}} </td>
          </ng-container>

          <ng-container matColumnDef="count">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Count </th>
              <td mat-cell *matCellDef="let dataCell"> {{dataCell.count}}
              </td>
          </ng-container>

          <ng-container matColumnDef="frameURL">
            <th mat-header-cell *matHeaderCellDef> Frame URL </th>
            <td mat-cell *matCellDef="let dataCell">
              <div class="table-img">
                <a [href]="dataCell.frameURL">{{dataCell.frameURL}}</a>
                <img [src]="dataCell.frameURL">
              </div>
            </td>
        </ng-container>

          <tr mat-header-row *matHeaderRowDef="chartColumns; sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: chartColumns;" >
          </tr>
      </table>
  </div>
  <button class="refresh-button" mat-raised-button color="primary" (click)="handleRefresh()">Refresh</button>
  </div>
  <div>
    <div class="chart-container">
      <canvas baseChart
        [data]="pieChartData"
        [labels]="pieChartLabels"
        [chartType]="pieChartType"
        [options]="pieChartOptions"
        [plugins]="pieChartPlugins"
        [legend]="pieChartLegend"
        height="400px">
      </canvas>
    </div>
  </div>
</div>
